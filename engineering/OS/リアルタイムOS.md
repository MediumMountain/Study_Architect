# リアルタイムOS（RTOS）
- 主に組み込みシステムに使用されており、システムの要求に対してリアルタイム性能を満足する事に重点を置いたOS
- リアルタイムOSの中心機能は、定められた優先度に則り、実行タスクを選択するスケジューリング機能(タスクスケジューラー)
    - OSの基本的な構造はハードウェアからの操作をデバイスドライバが受けもった後、カーネルが目的に合わせて操作を制御。
    - そのままミドルウェアが処理を実行し、最終的に機器のアプリケーションプログラムとして動作する。
    - タスクスケジューラーは、上記のOS構造の中でカーネルが優先度の高いタスクを選択し、実行を判断する機能

## リアルタイムOSと汎用OSとの違いを比較
- 汎用OSはタスクの優先度が無く、平均処理速度を優先して設計されている。
- 一方で組み込みシステム用に設計されたリアルタイムOSは、要求されたタスクを順番通りに動作させるのではなく、実行に必要な要件が整ったタスクから実行していく。
- 加えてそれぞれのタスクに決められている優先度にしたがって、別の処理中に割り込んでタスクを中断、実行する順番を入れ替えることがある。


## リアルタイムOSの特徴・メリット
- マルチタスクを実行する事が可能
- 優先度に則り、タスクをスケジューリングする事が可能
- 複数人で開発しやすく、大規模・中規模の開発が容易
- プログラムサイズが小さく、資源が小さくてすむ


## イベントドリブン・ブリエンプション方式

プリエンプションとは、実行状態にあるタスクがOSの制御によりCPUの使用権を奪われ実行可能状態に移されることをいい、以下の状態を満たした場合に起こります。
実行状態のタスクより優先度の高いタスクが実行可能状態になる
実行状態のタスクに割り当てられたCPU使用時間が終了する

OSがCPUやシステム資源を管理し、CPU使用時間や優先度などによって複数のタスクを実行状態や実行可能状態へ切替えながら実行していくマルチタスク方式をプリエンプション方式といいます。



セマフォは、並行動作している複数のタスク間で共通して使用する資源へのアクセスを制御するメカニズムです。資源を使用するにはセマフォを取得する必要があり、あるタスクがセマフォを取得するとセマフォは1つ減り、逆に資源が解放されると1つ増えます。セマフォが0であれば資源へのアクセスを待たなくてはなりません。この仕組みによって、同時更新が問題となる処理部分の排他制御を行います。セマフォは、整数型の共有変数である「セマフォ変数」とそれを操作する「P操作」「V操作」で管理されます。