# マルチプロセス(マルチタスク)とマルチスレッドの違い
- １つのPCで複数のプロセスを並行して処理を行うことをマルチプロセスと言う。また、１つのプロセスに複数のスレッドが存在し並行して処理を行うことをマルチスレッドと言う。 


### プロセスとは
- OSによって与えられたプログラムの実行単位である。
- プログラムコードに記された命令を実行して情報処理すること

## OSのメモリ管理のしくみ
- OSによって提供された個別のプロセス用のメモリ空間の事をプロセスインスタンスと呼ぶ。
- OSは仮想アドレス番号を物理メモリに与えてプロセスに提供する。
    - プロセスは処理を実行するときに仮想アドレスでメモリにアクセスする。
    - OSは都度、仮想アドレスを物理アドレスに変換してメモリにアクセスする。
    - プロセスは物理アドレスの状態を意識する必要はない。

- プロセスは提供された仮想アドレスの範囲内のメモリ空間にしかアクセスできない。
- OSは他のプロセスの使用するメモリ領域はアクセスできない。

### プロセス・インスタンス (Process Instance)
- 現実のイベントに応じ、特定のプロセスで実行される一組のアクティビティと作業アイテムのこと。
- プロセス実行エンジンでは、通常、複数のプロセス・インスタンスが並行的に実行される。


## マルチプロセス
- メモリ空間はプロセスインスタンスで各プロセスごとに分割できるが、CPUは一つしか無い。
    - そのため、時間で分割する。

- ハードウェアのタイマーでCPUに一定時間ごとに割り込みを入れ、CPUに割り当てるプロセスを切り替える。
- CPUを複数のプロセスで時分割で共有することをタイムスライスと呼ぶ。


## マルチスレッド
- マルチスレッドは一つのプロセスインスタンスの中でファイルIOやキーボードの入力待ちなどが発生したときでも、CPUを待たせずに効率良くCPUを使用する為に、一つのプロセスインスタンスの中で、タイムスライスを使用して複数の処理を並列実行する仕組みである。

    - 一つのプロセスが内部に複数のスレッドを持ち、CPUをタイムスライスで共有して並列実行する。
    - マルチプロセスと違い、プロセスの中のスレッドはスレッド専用のインスタンスを持たない。
    - スレッドは直接プロセスインスタンスにアクセスする。


- プロセスがアクセスするのはOSによって提供される仮想アドレスだが、スレッドにはそのようなメモリ保護の仕組みが無く、仮想仮想アドレスのようなものはない。
- よってスレッドは直接プロセスインスタンスの仮想アドレスにアクセスする。

    - スレッドが複数あると、互いにメモリの同じ場所にアクセスしてしまうことで、メモリデータの不整合が生じたり、互いに更新待ち(デッドロック)になる場合がある。
    - そのため、マルチスレッドでプログラムを作成するときプログラマーはスレッドのメモリ管理に注意して作らなければならない。

    - スレッドとスレッドの使用しているメモリ領域が重ならないように人間が管理しなければならない。
        - (あくまで原則としてだがクラスライブラリなどでこの管理を代行してくれる物もある)

    - プロセスのメモリ管理はOSが自動で行ってくれるが、スレッドのプロセス内のメモリ管理はプログラマーが手作業で管理するコード(プログラム)を書く。

    - メモリ管理を失敗すると非常に分かりにくいバグが生じる。発見するのは容易ではない。
    - またスレッドがプロセスのメモリを干渉するので、スレッドがダウンするとプロセスごとダウンしてしまう。



# 並列処理



# 並行処理